# swift-sdks

Swift SDK implementation for Sui, bootstrapped from `go-sdks` and `py-sdks`, with API conventions aligned to `ts-sdks` JSON-RPC network defaults.

## Current status

Implemented foundations:

- Dependency-first crypto stack:
  - [`apple/swift-crypto`](https://github.com/apple/swift-crypto)
  - [`21-DOT-DEV/swift-secp256k1`](https://github.com/21-DOT-DEV/swift-secp256k1)

- `BCS`
  - ULEB128 encode/decode with canonical checks and u32 bound
  - `BCSReader` (`u8/u16/u32/u64/bool/bytes/uleb128`)
  - `BCSWriter` (`u8/u16/u32/u64/bool/bytes/uleb128`)
- `Sui JSON-RPC`
  - Network mapping: `mainnet/testnet/devnet/localnet`
  - Sui type helpers: address/object id normalization + validation, transaction digest validation
  - `SuiOrder` enum (`ascending` / `descending`) for order-aware RPC overloads
  - HTTP JSON-RPC transport based on `URLSession`
  - Error modeling for HTTP status, JSON-RPC server error, malformed response
  - `SuiClient` base methods:
    - `call`
    - `discoverRPCAPI`
    - `getRPCAPIVersion`
    - `getRpcApiVersion` (alias)
    - `getObject`
    - `getObjects`
    - `multiGetObjects`
    - `dryRunTransactionBlock`
    - `dryRunTransactionBlock` (bytes/data overloads)
    - `devInspectTransactionBlock` (string/bytes/data overloads)
    - `getCoins`
    - `getAllCoins`
    - `getBalance`
    - `getAllBalances`
    - `getCoinMetadata`
    - `getTotalSupply`
    - `getMoveFunctionArgTypes`
    - `getNormalizedMoveModulesByPackage`
    - `getNormalizedMoveModule`
    - `getNormalizedMoveFunction`
    - `getNormalizedMoveStruct`
    - `getOwnedObjects`
    - `getDynamicFields`
    - `getDynamicFieldObject`
    - `queryEvents`
    - `getEventsByTransaction`
    - `getEvents` (alias)
    - `queryTransactionBlocks`
    - `getCheckpoints`
    - `getCheckpoint`
    - `getLatestCheckpointSequenceNumber`
    - `getTransactionBlock`
    - `multiGetTransactionBlocks`
    - `tryGetPastObject`
    - `executeTransactionBlock` (string/bytes/data overloads, single or multi-signature)
    - `signAndExecuteTransaction` (base64/bytes/data overloads, supports optional confirmation wait)
    - `getLatestSuiSystemState`
    - `getTotalTransactionBlocks`
    - `getCommitteeInfo`
    - `getNetworkMetrics`
    - `getAddressMetrics`
    - `getEpochMetrics`
    - `getAllEpochAddressMetrics`
    - `getEpochs`
    - `getMoveCallMetrics`
    - `getCurrentEpoch`
    - `getStakes`
    - `getStakesByIDs`
    - `getStakesByIds` (alias)
    - `getValidatorsApy`
    - `getChainIdentifier`
    - `resolveNameServiceAddress`
    - `resolveNameServiceNames`
    - `resolveNameServiceNames` (supports `at` / `dot` formatting)
    - `getProtocolConfig`
    - `verifyZkLoginSignature`
    - `waitForTransaction`
    - `getPackage`
    - `getReferenceGasPrice`
    - order overloads:
      - `queryEvents(order:)`
      - `queryTransactionBlocks(order:)`
      - `getCheckpoints(order:)`
      - `getEpochMetrics(order:)`
      - `getEpochs(order:)`
  - Pagination helper + aggregated fetch:
    - `allCoins`
    - `allOwnedObjects`
    - `allDynamicFields`
    - `allEvents`
    - `allTransactionBlocks`
    - `allCheckpoints`
    - `allEpochMetrics`
    - `allEpochs`
    - order overloads:
      - `allEvents(order:)`
      - `allTransactionBlocks(order:)`
      - `allCheckpoints(order:)`
      - `allEpochMetrics(order:)`
      - `allEpochs(order:)`
  - Typed API (beta, additive):
    - object/object-page methods:
      - `getObjectTyped` / `getObjectsTyped` / `multiGetObjectsTyped`
      - `getOwnedObjectsTyped` / `allOwnedObjectsTyped`
      - `getDynamicFieldObjectTyped`
      - `getPackageTyped`
      - `tryGetPastObjectTyped`
    - `getAllCoinsTyped` / `getCoinsTyped` / `allCoinsTyped`
    - `getBalanceTyped` / `getAllBalancesTyped`
    - `getCoinMetadataTyped` / `getTotalSupplyTyped`
    - move methods:
      - `getMoveFunctionArgTypesTyped`
      - `getNormalizedMoveModulesByPackageTyped`
      - `getNormalizedMoveModuleTyped`
      - `getNormalizedMoveFunctionTyped`
      - `getNormalizedMoveStructTyped`
    - dynamic/event/tx methods:
      - `getDynamicFieldsTyped` / `allDynamicFieldsTyped`
      - `getEventsByTransactionTyped`
      - `getEventsTyped` (alias)
      - `queryEventsTyped` / `allEventsTyped`
      - `queryTransactionBlocksTyped` / `allTransactionBlocksTyped`
      - `getTransactionBlockTyped` / `multiGetTransactionBlocksTyped`
      - `executeTransactionBlockTyped`
      - `executeTransactionBlockTyped` (single or multi-signature)
      - `signAndExecuteTransactionTyped`
      - `waitForTransactionTyped`
      - `getCheckpointRawTyped`
    - `getCheckpointsTyped` / `allCheckpointsTyped` / `getCheckpointTyped`
    - `resolveNameServiceNamesTyped`
    - epoch/system methods:
      - `getEpochMetricsTyped` / `allEpochMetricsTyped`
      - `getEpochsTyped` / `allEpochsTyped`
    - order overloads:
      - `queryEventsTyped(order:)`
      - `allEventsTyped(order:)`
      - `queryTransactionBlocksTyped(order:)`
      - `allTransactionBlocksTyped(order:)`
      - `getCheckpointsTyped(order:)` / `allCheckpointsTyped(order:)`
      - `getEpochMetricsTyped(order:)` / `allEpochMetricsTyped(order:)`
      - `getEpochsTyped(order:)` / `allEpochsTyped(order:)`
      - `getLatestSuiSystemStateTyped`
      - `getCommitteeInfoTyped`
      - `getNetworkMetricsTyped` / `getAddressMetricsTyped`
      - `getAllEpochAddressMetricsTyped`
      - `getMoveCallMetricsTyped` / `getCurrentEpochTyped`
      - `getValidatorsApyTyped`
      - `getStakesTyped` / `getStakesByIDsTyped`
      - `getStakesByIdsTyped` (alias)
      - `getProtocolConfigTyped`
      - `verifyZkLoginSignatureTyped`
    - tx simulation methods:
      - `dryRunTransactionBlockTyped` (string/bytes/data overloads)
      - `devInspectTransactionBlockTyped` (string/bytes/data overloads)
    - misc:
      - `discoverRPCAPITyped`
      - `getRPCAPIVersionTyped`
      - `getRpcApiVersionTyped` (alias)
      - `getLatestCheckpointSequenceNumberTyped`
      - `getChainIdentifierTyped`
      - `resolveNameServiceAddressTyped`
      - `getReferenceGasPriceTyped`
      - `getTotalTransactionBlocksTyped`
- `Cryptography (initial)`
  - `SignatureScheme` flags aligned with Sui convention
  - `ed25519` / `secp256k1` / `secp256r1` keypair/public key:
    - generate keypair
    - `suiprivkey` bech32 encode/decode (`getSecretKey` / `init(secretKey:)`)
    - sign / verify raw bytes
    - serialized signature (`flag || signature || pubkey`, base64)
  - verify helpers:
    - raw signature verify
    - intent-based verify (`TransactionData` / `PersonalMessage`)
    - serialized signature verify
    - serialized signature verify with expected address check
    - extract `(scheme, publicKey)` from serialized signature
  - intent signing:
    - `signWithIntent`
    - `signTransaction`
    - `signPersonalMessage`
  - intent digest:
    - currently `SHA-256` (aligned with this repository's Go implementation)
  - public key factory:
    - from raw bytes by signature scheme
    - from `flag || pubkey` bytes (or base64 Sui public key)

## Run tests

```bash
cd swift-sdks
swift test
```

## Next steps

- Add typed response models for key JSON-RPC methods
- Add address/object/digest validation parity with Go/TypeScript SDKs
- Add keypairs, signatures, verify, and transaction builders
